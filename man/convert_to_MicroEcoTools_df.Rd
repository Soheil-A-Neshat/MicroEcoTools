% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convert_to_MicroEcoTools_df.R
\name{convert_to_MicroEcoTools_df}
\alias{convert_to_MicroEcoTools_df}
\title{Convert SummarizedExperiment or phyloseq Object to a MicroEcoTools-Compatible Data Frame}
\usage{
convert_to_MicroEcoTools_df(
  x,
  group_col = "Exp.Grp",
  replicate_col = "Replicate",
  assay_name = "counts"
)
}
\arguments{
\item{x}{A SummarizedExperiment or phyloseq object.}

\item{group_col}{A character string indicating the column name in the sample metadata that
represents the experimental group. Default is `"Exp.Grp"`.}

\item{replicate_col}{A character string indicating the column name in the sample metadata that
represents replicates. Default is `"Replicate"`.}

\item{assay_name}{For SummarizedExperiment objects, the name of the assay to use. Default is `"counts"`.}
}
\value{
A data frame with the first two columns corresponding to the experimental group and replicate,
  and the remaining columns containing the taxa/feature counts.
}
\description{
This function takes in either a [SummarizedExperiment::SummarizedExperiment()] or a
[phyloseq::phyloseq()] object and converts it to a data frame formatted for MicroEcoTools analyses.
The returned data frame will have two metadata columns (by default, `Exp.Grp` and `Replicate`)
followed by the taxa/feature count data.
}
\examples{
\dontrun{
  ## For a SummarizedExperiment object:
  library(SummarizedExperiment)
  # Suppose 'se_obj' is a SummarizedExperiment with colData containing columns "Exp.Grp" and "Replicate"
  df <- convert_to_microecotools_df(se_obj, group_col = "Exp.Grp", replicate_col = "Replicate")

  ## For a phyloseq object:
  library(phyloseq)
  # Suppose 'ps_obj' is a phyloseq object with sample_data containing columns "Exp.Grp" and "Replicate"
  df <- convert_to_microecotools_df(ps_obj, group_col = "Exp.Grp", replicate_col = "Replicate")
  
    # Generate a toy OTU matrix.
  In phyloseq, rows can be taxa and columns samples (if taxa_are_rows is TRUE).
  otu_mat <- matrix(sample(1:50, 30, replace = TRUE), nrow = 5, ncol = 6)
  rownames(otu_mat) <- paste0("Taxa", 1:5)    # Taxa names
  colnames(otu_mat) <- paste0("Sample", 1:6)    # Sample names

  # Create the OTU table.
  # Set taxa_are_rows = TRUE if rows correspond to taxa.
  OTU <- phyloseq::otu_table(otu_mat, taxa_are_rows = TRUE)

  # Create sample metadata as a data.frame.
  sample_metadata_ps <- data.frame(
  Exp.Grp = rep(c("Control", "Treatment"), each = 3),  # Two groups with 3 samples each
  Replicate = rep(1:3, times = 2)                       # Replicate numbers for each group
  )
  rownames(sample_metadata_ps) <- paste0("Sample", 1:6)    # Make sure rownames match column names in OTU

  # Create the sample_data object.
  SD <- phyloseq::sample_data(sample_metadata_ps)

  # Finally, create the phyloseq object using the OTU table and sample metadata.
  ps_toy <- phyloseq::phyloseq(OTU, SD)
  df_ps <- convert_to_MicroEcoTools_df(ps_toy,
                                     group_col = "Exp.Grp",
                                     replicate_col = "Replicate")
  print("Converted phyloseq object:")
  print(head(df_ps))
 # Test the toy dataset with NMA function
 nma_result <- NMA(DaTa = df_ps, NSim = 10)
 }

}
